<!DOCTYPE html>
<html lang="en">
  <head>
	<meta name="generator" content="Hugo 0.17" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>80%</title>

    
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/eightypercent.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-93698-1', 'auto');
      ga('send', 'pageview');

    </script>
    <link rel="icon" type="image/png" href="/images/favicon-assets/favicon@128.png" sizes="128x128" />
    <link rel="icon" type="image/png" href="/images/favicon-assets/favicon@64.png" sizes="64x64" />
    <link rel="icon" type="image/png" href="/images/favicon-assets/favicon@32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/images/favicon-assets/favicon@16.png" sizes="16x16" />

    <link href="/index.xml" rel="alternate" type="application/rss+xml" title="80%" />
    <link href="/index.xml" rel="feed" type="application/rss+xml" title="80%" />
    
  </head>
  <body>

    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header pull-left">
          <a href="/" class="navbar-brand">80%</a>
        </div>
        <div class="navbar-header navbar-text pull-right">
          Joe Beda &middot; <a href="http://www.twitter.com/jbeda" class="navbar-link" rel="author">@jbeda</a>
        </div>
      </div>
    </nav>

  <div class="container">
    
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00167.html">Skewed view</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Tue, Feb 24, 2004</span>
              

    <p>
        <a href="http://weblogs.asp.net/cumpsd/archive/2004/02/22/78076.aspx">David Cumps</a> is
        playing around with XAML and skewing UI controls.&#160; He found a bug which causes
        some rendering artifacts when doing a skew of a listbox.&#160; I tried some of his
        XAML out on the latest and greatest bits and didn't find the bug.&#160; So, this is
        either a video driver issue, or it is something that we've fixed since the PDC.&#160;
        Here is a (badly encoded -- thanks mspaint.exe) gif of a skewed list box: 
    </p>
    <p>
        <img alt="A skewed list box" hspace="0" src="http://static.eightypercent.net/images/skewbug.gif" align="baseline" border="0" /> 
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00167.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00166.html">Back from the dead</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Sat, Feb 21, 2004</span>
              

    <p>
        I don't know how many people care, but I'm sorry that I haven't been posting lately!&#160;
        I'll try to make that up some.&#160; Anyway, here is an update of what has been happening: 
    </p>
    <ul>
        <li>
            Went to Cabo San Lucas for a week and relaxed.&#160; It was great to sit in the sun
            at the beach, order a bucket of beers and eat tacos. 
        </li>
        <li>
            Adopted two dogs.&#160; Their names are Lady and Cocoa.&#160; Lady is one and a half
            years old and was rescued from a meth lab and was probably abused.&#160; She hasn't
            shown many signs of it, but you never know what is going to trigger memories of abuse.&#160;
            She had a litter of puppies when she was really young.&#160; Cocoa is the one puppy
            for which the rescuers didn't find a home.&#160; He was her favorite puppy, so we
            adopted them as a pair.&#160; More details and pictures to come later. 
        </li>
        <li>
            I celebrated the one year anniversary of my blog by not posting.&#160; You can find
            the first post <a href="http://www.eightypercent.net/Archive/2003/01/09.html">here</a> from
            Janurary 9, 2003. 
        </li>
        <li>
            Read lots and lots of books.&#160; I've been reading ebooks on my PocketPC on the
            bus to and from work every day.&#160; I love ebooks! 
        </li>
        <li>
            Started writing some ASP.Net code for a picture gallery over at bedafamily.com.&#160;
            I'd love to finish this up so that I can easily post lots of photos.</li>
    </ul>
    <p>
        I've started recovering from the hibernation that is winter in Seattle.&#160; I want
        to start talking more about what is going on in Avalon and life in general.
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00166.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00165.html">Home Theater update</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Mon, Dec 22, 2003</span>
              

    <p>
        I haven't been posting in a while as I've been working on my new Home Theater!
    </p>
    <p>
        Here is the final setup:
    </p>
    <ul>
        <li>
            <a href="http://www.projectorcentral.com/Sanyo-PLV-Z2.htm">Sanyo Z2</a> LCD projector.&#160;
            1280x720 widescreen.</li>
        <li>
            <a href="http://www.paradigm.com/Website/SiteParadigmProduct/ParadigmModels/MonSeriesII/Monseries.html">Paradigm
            Monitor</a> speakers.&#160; I got Monitor 7s in front with the CC-370 center and the
            ADP-370 dipole surrounds.&#160; I picked these up in Canada on Chris' recommendation.</li>
        <li>
            <a href="http://www.svsubwoofers.com/subs_pci_20-39.htm">SVS 20-39PC<em>i</em></a> subwoofer.&#160;
            This thing is a beast!&#160; It is over 3 feet high and can really shake the walls.</li>
        <li>
            <a href="http://www.usa.denon.com/catalog/products.asp?l=1&amp;c=2">Denon AVR-3803</a> reciever.&#160;
            There was a great deal going on these.&#160; Otherwise it would have been way out
            of my price range.</li>
        <li>
            <a href="http://www.digitalnetworksna.com/shop/_templates/item_mainRTV.asp?model=231&amp;cat=52">ReplayTV
            5504</a> as a TV tuner.&#160; I got one of these as it was priced wrong at Circuit
            City.&#160; Normally it is ~$450 with 3 years of service, but they were selling them
            for $150 with 3 years of service as they had updated the pricing for no included service
            but the units they still had <em>did</em> have the free service.</li>
        <li>
            <a href="http://www.xbox.com/en-US/default.htm?culture=0">XBox</a>.&#160; Some games
            (like Amped 2) do 720p natively.&#160; They look pretty sweet.</li>
    </ul>
    <p>
        I also built my own ceiling mount for the projector and had a friend help me build
        and paint a screen.&#160; I'll put some pictures up when things get further along.
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00165.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00164.html">Changeables desconstructed</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Mon, Dec 22, 2003</span>
              

    <p>
        Frank Hileman (no blog, Frank?) has been pounding us (the Avalon team) with some great
        questions.&#160; Most of these have been conversations in comments, but I figured
        that I should bring this to the front page, so to speak. 
    </p>
    <p>
        Of of Frank's concerns, at least as expressed in <em>my</em> comments section, is
        that we are essentially over engineering with the Changeable pattern.&#160; Specifically,
        he says this: 
    </p>
    <blockquote> 
    <p>
        The non-intrusive part of Changeable has a const flag on stock brushes, etc. This
        means the user must clone these and write to a copy. This is simple and easy to understand. 
    </p>
    <p>
        The intrusive part of Changeable is the part which introduces the idea of "used" and
        changes the simple concept of "object reference" into something complicated. From
        what you have explained, the intrusive part of Changeable exists only to allow simultaneous
        multi-threaded writers to the scene graph. 
    </p>
    </blockquote> 
    <p>
        I think that the point around threading is a red-herring here.&#160; 
    </p>
    <p>
        <strong>Changeable Requirements</strong> 
    </p>
    <p>
        The main problem that changeables are trying to solve is that we want to have, under
        most circumstances, these changeable API objects (Brush, Pen, etc.) act like value
        types and other times we want them to act like refernce types.&#160; We essentially
        want to walk a fine line and get advantages from each.&#160; Frank, forgive me if
        you've heard a bunch of this before, but I think that this is useful to put together
        in one place. 
    </p>
    <p>
        With respect to value types, we want the simple user semantic to be: Modify my local
        copy and have it be disconnected or "severed" when I pass it in to another object.&#160;
        When rendering this means that I can do this: 
    </p>
    <pre>SolidColorBrush&#160;scb = new&#160;SolidColorBrush();
scb.Color = Colors.Blue;
myDrawingContext.DrawGeometry(scb, null /*pen*/, myGeometry1);
scb.Color = Colors.Red;
myDrawingContext.DrawGeometry(scb, null /*pen*/, myGeometry2);
</pre>
    <p>
        and have my two geometries be drawn with different colors.&#160; Since many times
        the drawing context is writing in to a metafile like data structure, if we used pure
        reference semantics both geometries would be drawn as Red.&#160; 
    </p>
    <p>
        Another example is setting properties in to a set of elements: 
    </p>
    <pre>SolidColor Brush scb = new SolidColorBrush();
scb.Color = Colors.Blue;
myElement1.Background = scb;
myElement2.Background = scb;

// in some other code...
((SolidColorBrush)myElement1.Background).Color = Colors.Red;</pre>
    <p>
        I think, in most cases, if some user walks up to an element, such as myElement1 above,
        and sets the background brush, he doesn't expect that this will have the side effect
        of changing the background brush of another element.&#160; Side effects like this
        would make for an unstable system. 
    </p>
    <p>
        Value types don't solve all of our problems though!&#160; We also want the efficiencies
        and advanatages of making these be reference types.&#160; Specifically, we want to
        have to have hierarchies, not have to copy the entire thing around and be able to
        save space by having multiple places reference the same thing.&#160; We imagine a
        world with lots of elements getting their values via styling.&#160; Because of this,
        we want the normal case be that a user puts a value in to a style block somewhere
        and then that object (via reference) gets widely shared, perhaps between hundreds
        of elements.&#160; We obviously want to make the per-reference cost as small as possible
        here.&#160; Going with a pure value type system won't work. 
    </p>
    <p>
        <strong>The Builder Pattern</strong> 
    </p>
    <p>
        The first cut at solving this problem was called the Builder Pattern.&#160; This pattern
        was a generalization of the StringBuilder pattern.&#160; Specifically, for each type,
        there was a companion, or Builder type.&#160; The main type was immutable.&#160; In
        other words, any write operations would raise an exception.&#160; So, for SolidColorBrush,
        we wrote a SolidColorBrushBuilder.&#160; SolidColorBrush was immutable while SolidColorBrushBuilder
        was a fully writeable object.&#160; All of the APIs in the system (property types
        on element, parameters in to DrawingContext methods, etc.) took the non-builder types.&#160;
        To create one of those non-builder types, the user had to do one of the following: 
    </p>
    <ul>
        <li>
            Create the target type directly by using a constructor. 
        </li>
        <li>
            Create a builder, configure it, and call the ToXXX method on it to construct the main
            type. 
        </li>
        <li>
            Create a builder by initializing it off of its companion type.&#160; Make a delta
            and call the ToXXX method to construct the main type. 
        </li>
    </ul>
    <p>
        From one point of view, this is a great system.&#160; It is very explicit (at compile
        time) what is editable and what isn't.&#160; However, some early users of our system
        (ad-hoc usability) ended up really disliking this system.&#160; The need to constantly
        deal with both types was onourous.&#160; It also meant that the user could never just
        index directly in to a type and change it.&#160;&#160;To affect any change, it&#160;was
        always necessary to create the builder, make the change, and set the old value in. 
    </p>
    <p>
        <strong>The Changeable Pattern</strong> 
    </p>
    <p>
        In response to a hail of internal criticism on the Builder Pattern we went back and
        came up with the Changeable pattern.&#160; The idea is that we would have one type
        object with an immutable bit.&#160; Once the immutable bit gets set, all further changes
        to that object will throw.&#160; This opens the way up to runtime errors (instead
        of compile time errors) but makes certain "delta" scenarios much easier to deal with. 
    </p>
    <p>
        However, we still wanted to solve the problems listed in the first part of this post.&#160;
        Specifically, we didn't want to leave it up to the user to manually flip the immutable
        bit.&#160; In this way we defined certain types of operations that would automatically
        create a copy and flip the immutable bit for you if necessary.&#160; We then went
        further and added advanced modes so that those APIs either make a copy but <em>don't</em> flip
        the immutable bit or the APIs just take a reference.&#160; These last modes (whereby
        something like an element holds on to a <em>mutable</em> brush) were never possible
        with the Builder pattern. 
    </p>
    <p>
        We also added a notification mechanism so that someone who does hold on to an object
        that isn't immutable can learn when that object changes. 
    </p>
    <p>
        So, do you guys (Frank?) like the more explicit builder pattern better?&#160; More
        questions? 
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00164.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00162.html">DX interop in Avalon</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Mon, Dec 22, 2003</span>
              

    <p>
        Vince (who I knew in high school as Steve) wrote in my comments: 
    </p>
    <blockquote> 
    <p>
        How can I get to the underlying DX9-esque interface I know you guys gotta be using
        this stuff. I don't want to deal with EllipseGeometry objects and the like, gimme
        DrawPrimitive, push buffers, and pain-in-the ass ITexture objects. 
    </p>
    </blockquote> 
    <p>
        Don't worry dude!&#160; The details are still being worked out, but we know that we
        have to make it possible for people to interop with old code, and with DX.&#160; At
        the very least, you will be able to host another hwnd window that is written using
        GDI/User or DX.&#160; The details on when and how DX will get accelerated, and how
        it will play with the rest of the system are still TBD.&#160; At the very least, when
        you go full screen with DX you will own the device.
    </p>
    <p>
        For simple 3D stuff (load up a model and spin it around like a 3D icon) we will have
        our own 3D API that doesn't pretent to offer all of the flexibility of D3D.
    </p>
    <p>
        What specific scenarios are you interested in?&#160; My thinking is that you might
        want to write a tool and have the UI done with Avalon and the "canvas" of the tool
        done via D3D.&#160; In this scenario, you are in a windowed situation and Avalon is
        on top.&#160; The 3D stuff is running in a window in an Avalon app.&#160; Another
        scenario that might be interesting is that you have a D3D app/game and you are using
        Avalon to drive 2D type UI inside of the game environment.
    </p>
    <p>
        I can't promise that all of the scenarios will be doable, but let me know what is
        most important to you.
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00162.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00161.html">Holiday parties</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Mon, Dec 22, 2003</span>
              

    <p>
        I went to a great holiday party last night thrown by my neighbors, Bob and Carol.&#160;
        We moved in quite a while ago&#160;but hadn't really had a chance to interact with
        any of our neighbors yet.&#160; This was a great opportunity for us to not only chat
        with our hosts, but also others from around the neighborhood.&#160; It turns out that
        the internet makes the world even smaller.&#160; Bob had run across my blog and already
        knew more about me (or at least my work!) than I knew about him.
    </p>
    <p>
        I also chatted with our neighbors on the other side, Gary and Marge.&#160; Gary is
        a long time photographer that just recently went digital with a Canon 10D and a sweet
        lens setup.&#160; He sent me a link to some of <a href="http://pbase.com/mgmoogk">his
        images</a>.&#160; These were done with film -- a Pentax 6x7 that he recently sold.&#160;
        I really need to get off of my butt and put together a gallery of some of my better
        up on the net.
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00161.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00160.html">Avalon Changeable pattern</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Fri, Dec 5, 2003</span>
              

    <p>
        <a href="http://weblogs.asp.net/greg_schechter/">Greg Schechter</a> (whose office
        is right next to mine) has a new blog and has posted some <a href="http://weblogs.asp.net/greg_schechter/posts/41362.aspx">great
        info</a> on the Avalon Changeable pattern.&#160; This pattern was originally developed
        for the graphics space but is useful in many other places.&#160; I was going to write
        about changeables at some point but Greg beat me to it.
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00160.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00159.html">Avalon Job Opening</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Thu, Dec 4, 2003</span>
              

    Apply <a href="http://www.microsoft.com/careers/search/details.aspx?JobID=4dfb0b89-fdd4-497d-83cb-13162ad8e2c3">here</a> for
    a job working on Avalon.&#160; Specifically, this job is for our very cool timing
    and animation team.&#160; We are a pretty dynamic team so the actual responsibilities&#160;may
    include other parts of Avalon graphics depending on who we get and what their skills
    are.


          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00159.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00158.html">Avalon Visuals</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Tue, Dec 2, 2003</span>
              

    <p>
        <a href="http://weblogs.asp.net/dmarsh/">Drew Marsh</a>&#160;posted an interesting
        article entitled "<a href="http://weblogs.asp.net/dmarsh/posts/40626.aspx">Avalon
        Dissected</a>."&#160; It is great to see people taking an interest in Avalon at this
        level.&#160; However, he got some of the details around Visuals wrong. 
    </p>
    <p>
        The graphics system in Avalon is new and is built to take advantage of the hardware.&#160;
        Beyond this, there is a software engine for the cases when the hardware isn't supported.&#160;
        On top of this, we've built a "scene graph" system that natively supports animation
        and remoting.&#160; In the normal case, the actual rendering of the scene graph is
        done on a dedicated composition thread where third party code isn't allowed to run.&#160;
        The description of everything on screen and some primitive animation information is
        passed to this thread so that the rendering can happen independently of what is going
        on with the regular UI thread.&#160; In the case when you are running an Avalon application
        from a remote machine (via Terminal Services or Remote Desktop) with an advanced client,
        this composition thread will run on the remote machine and the actual rendering of
        the scene graph will happen without any network traffic.&#160; Some animations will
        be able to run on the remote machine without network traffic also.&#160; 
    </p>
    <p>
        From the programming model point of view, a node in our scene graph is&#160;called <a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/c/visual/visual.aspx">Visual</a>.&#160;
        There are different types of visuals that are intended to be used for different purposes.&#160;
        It is also important to note that UIElement derives from Visual so every UIElement <em>is-a</em> Visual.&#160;
        (At one point an Element <em>had-a</em> visual but this was changed with the rearchitecture
        that <a href="http://www.simplegeek.com">ChrisAn</a> <a href="http://www.simplegeek.com/PermaLink.aspx/359c73aa-4711-4061-b9d9-16300d8d278e">talks
        about</a>.) 
    </p>
    <p>
        Every Visual implements an interface called <a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/i/ivisual/ivisual.aspx">IVisual</a>.&#160;
        There is no situation where a third user should be implementing IVisual.&#160; The
        reason that we created this interface is so that we can use&#160;<a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/csref/html/vcwlkExplicitInterfaceImplementationTutorial.asp">explicit
        interface implementation</a> to hide the methods on IVisual.&#160; We didn't want
        to pollute the public object model for UIElement (and Button, etc.) with things that
        most users weren't going to be using. 
    </p>
    <p>
        A Visual has the following capabilities: 
    </p>
    <ul>
        <li>
            Children with a transform on each child 
        </li>
        <li>
            Opacity 
        </li>
        <li>
            Clip 
        </li>
        <li>
            Content (defined differently for each visual type) 
        </li>
        <li>
            Hit testing services 
        </li>
        <li>
            Coordinate transformation services 
        </li>
        <li>
            Bounding box services 
        </li>
        <li>
            And in the future: blend mode and effect 
        </li>
    </ul>
    <p>
        For each visual, the content of that visual is rendered followed by the children,
        from left to right.&#160; The Z-order of any children are completely implied by their
        order in the visual tree.
    </p>
    <p>
        Different specializations of Visual provide for specific types of content and for
        different flavors of public programming model.&#160; Here are the main ones: 
    </p>
    <ul>
        <li>
            <a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/c/containervisual/containervisual.aspx">ContainerVisual</a>.&#160;
            This Visual has all of its&#160;capabilities reflected publically and has no intrinsic
            content. 
        </li>
        <li>
            <a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/c/drawingvisual/drawingvisual.aspx">DrawingVisual</a>.&#160;
            This Visual also has all of its capabilties reflected publically.&#160; Its content
            is 2D vector data that is stored with it.&#160; You can think of it holding on to
            a "metafile."&#160; The way you change the content is&#160;call&#160;<a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/c/drawingvisual/m/renderopen.aspx">DrawingVisual.RenderOpen</a>,
            get a DrawingContext and draw with that. 
        </li>
        <li>
            <a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/c/retainedvisual/retainedvisual.aspx">RetainedVisual</a>.&#160;
            This guy is special.&#160;&#160;He is meant to be derived from.&#160; This is the
            Visual that UIElement derives from.&#160; All of the services and properties are available
            either via private functions (RenderOpen) or via the IVisual interface only.&#160;
            This visual can work in two modes: 
            <ul>
                <li>
                    Fully retained.&#160; This is the default case.&#160; In this case the visual is exacly
                    like&#160;a DrawingVisual except the IVisual members are not reexposed in a public
                    way.&#160; RenderOpen is also protected instead of private. 
                </li>
                <li>
                    On&#160;demand&#160;retained.&#160; If the&#160;derived class implements <a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/i/iretainedrender/iretainedrender.aspx">IRetainedRender</a>&#160;and
                    sets the protected <a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/c/retainedvisual/p/renderbounds.aspx">RenderBounds</a> property,
                    then <a href="http://longhorn.msdn.microsoft.com/?//longhorn.msdn.microsoft.com/lhsdk/ref/ns/msavalon.windows.media/i/iretainedrender/m/render.aspx">IRetainedRender.Render</a> will
                    be called back as necessary to fill in the "metafile" for this Visual.&#160; They
                    system looks at the tree and decides, based on the RenderBounds, if this Visual is
                    on screen.&#160; If it is, then the system calls IRetainedRender.Render and&#160;the
                    derived class writes into the "metafile" via&#160;a DrawingContext passed.&#160; The
                    system then caches that metafile.&#160; If the Visual is then pushed off screen for
                    some reason(scrolling, perhaps), then the system is free to throw away the cached
                    metafile to save space.&#160; The user can force the system to throw away the metafile
                    by calling the protected RetainedVisual.InvalidateVisual call.</li>
            </ul>
        </li>
    </ul>
    <p>
        When it comes time to render (scheduled via the Dispatcher class and coordinated with
        the animation system and layout) the system will walk the tree and decide what is
        and isn't on screen.&#160; It will then call render on any RetainedVisuals as necessary
        and cache the result.&#160; It also updates the data on the other thread for what
        is on screen so that the render can happen async from what is going on on the UI thread.&#160;
        In this way, there is no "render" happening on the UI thread in the normal case.&#160;
        Instead we are "compiling" the scene graph down to a simpler representation to run
        asynchronously on another thread or on another machine.
    </p>
    <p>
        The bits that we shipped in the PDC don't have this system fully implemented.&#160;
        For example, the composition thread isn't running completely async and we don't have
        rich TS support in.&#160; Come beta, more of our system will be completed and up and
        working.
    </p>
    <p>
        I'm sure that this is confusing and that I've missed some stuff, so feel free to ask
        questions and I'll do my best to answer.
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00158.html"></a>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2>
          <span class="glyphicon glyphicon-remove-sign postmark" aria-hidden="true"></span><a href="/post/old/00157.html">More HT thinking</a>
        </h2>
        <div class="readmore">
          <div class="post">
              <span class="lead">Sat, Nov 29, 2003</span>
              

    <p>
        Chris -- Thanks for the <a href="http://www.simplegeek.com/PermaLink.aspx/c8dae103-c610-4829-bc2d-d9fcb32be084">comments</a> on
        my theater plans.&#160; I really want to come over and see your setup as long as you
        promise me I won't drown.
    </p>
    <p>
        Chris mentioned Paradigms.&#160; I have a set of Paradigm Reference Studio/40 v2 and
        I love them.&#160; I don't want to take those and repurpose them from my living room
        to my theater so I'm starting over from that respect.&#160; Getting a full HT setup
        with the Studio line is probably more than I want to spend.&#160; However, I've been
        reading good things about the Monitor series.&#160; If I can get a good price on them
        from north of the border, I'll probably do that.&#160; (I was thinking B&amp;W too,
        but I like the sound of my Studio/40s.)
    </p>
    <p>
        With respect to the Infocus ScreenPlay 4800, that projector is just the Infocus X1
        repackaged for the home theater retail channel.&#160; It costs a good $300 more for
        essentially the same projector.&#160; I think that I'm going to up the ante a little
        bit and I now have a <a href="http://www.projectorcentral.com/Sanyo-PLV-Z2.htm">Sanyo</a> <a href="http://www.projectorcentral.com/sanyo_plv_z2.htm">Z2</a> on
        order.&#160; This is a much higher resolution (720p native) 16:9 LCD projector.&#160;
        It costs more, but I think that the resolution is going to be worth it.&#160; Supposedly
        the latest round of LCD projectors have the contrast ratio that the DLPs are famous
        for.&#160; Beyond this the Z2 has a DVI input.
    </p>
    <p>
        I couldn't get the deal on the Yamaha RXV1400 that I thought I could (even though
        I love the idea of a feedback based autocalibration feature) so I'm thinking the Denon
        3803 now.&#160; My current 2ch reciever is a Denon and I'm pretty happy with that.&#160;
        I'll see if I can get a good deal on the 3803.
    </p>
    <p>
        Beyond that, I'm going to paint the wall or go with&#160;painted fiber board to begin
        with and then look at buying a screen.&#160; I'm not sure what size I want yet!&#160;
        (6.25ftx3.5ft sounds good to start with.)
    </p>
    <p>
        Doing this whole home theater thing is a blast!&#160; There is so much to learn and
        read.&#160; There are tons of good forums and review sites.&#160; The process of just
        figuring out what I'm going to get is a huge undertaking in and of itself.
    </p>



          </div>
          <a class="readmore-click" class="text-center" href="/post/old/00157.html"></a>
        </div>
      </div>
    </div>
    
    

  <nav>
    <ul class="pager">
      <li class="previous">
        <a href="/page/11.html"><span aria-hidden="true">&larr;</span> Newer</a>
      </li>
      <li class="next">
        <a href="/page/13.html">Older <span aria-hidden="true">&rarr;</span></a>
      </li>
    </ul>
  </nav>

          <footer>
        <nav class="footer navbar-default clearfix container-fluid">
          <div class="row">
            <div class="pull-left navbar-text">
              <span class="text-nowrap">&copy; 2003-2016 Joe Beda</span>
              <span class="text-nowrap"><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" class="navbar-link">CC by-nc-nd 4.0</a></span>
            </div>
            
          </div>
        </nav>
      </footer>

  </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    
    <script src="/js/bootstrap.min.js"></script>
  </body>
</html>


