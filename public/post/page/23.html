<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Post &middot; 80%</title>

    
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/eightypercent.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-93698-1', 'auto');
      ga('send', 'pageview');

    </script>
    <link rel="icon" type="image/png" href="/images/favicon-assets/favicon@128.png" sizes="128x128" />
    <link rel="icon" type="image/png" href="/images/favicon-assets/favicon@64.png" sizes="64x64" />
    <link rel="icon" type="image/png" href="/images/favicon-assets/favicon@32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="/images/favicon-assets/favicon@16.png" sizes="16x16" />

    <link href="/index.xml" rel="alternate" type="application/rss+xml" title="80%" />
    <link href="/index.xml" rel="feed" type="application/rss+xml" title="80%" />
    
  </head>
  <body>

    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header pull-left">
          <a href="/" class="navbar-brand">80%</a>
        </div>
        <div class="navbar-header navbar-text pull-right">
          Joe Beda &middot; <a href="http://www.twitter.com/jbeda" class="navbar-link" rel="author">@jbeda</a>
        </div>
      </div>
    </nav>

  <div class="container">
    
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00056.html">More FTP stuff</a></h2>
        <span class="lead">Mon, Mar 3, 2003</span>
        <div class="post">
          
<p><a href="http://www.simplegeek.com/permalink.aspx/55cdfe57-82bf-47aa-9beb-5dc06d966724">Bitch</a>, <a href="http://www.simplegeek.com/permalink.aspx/063d639b-10c7-4826-9f5f-0b6c026a9268">bitch</a>, bitch.  Okay, Chris, what <i>do</i> you want in the FTP upstreamer?  I don't think that Radio's upstreamer deletes either.  Here is what I can do easily:
<ul>
<li>CD to a directory.  Throw if the dir isn't there.
<li>[done] Ensure a directory.  Try my best to make sure that a directory (and the path up to it) exists.
<li>Delete a directory.  The server will probably return an error if there are files in it.  I will throw.
<li>Get the current directory.
<li>Move up a direcotry.
<li>[done] Upload a file into the current directory.
<li>Download a file in the current directory and return a stream.  It would be easiest to buffer the entire file in memory.
<li>Delete a file in the current directory.
<li>[done] Return a text string with the current directory listing.
<li>Call SYST and return whatever the system gives us.  This might help detect the type of system on the other end.
</ul>
<p>The only thing that isn't easy and that will probably take quite a while to get right is parsing the output of the directory listing.  I don't have a bunch of servers to test this against to make sure it will work.
<p>As for the upstreamer itself, I'd rather have it not try and sync the stuff on the server (and hence delete stuff) because I'd be afraid of loosing data.  For instance, I upstream into the root of my site and I have all sorts of subdirs off of that.  I'm setting up a weblog for Rachel on eightypercent.net and her root will be a subdir.  I don't want to clobber her stuff whenever I upload my site.


        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00055.html">Jackpot, NV</a></h2>
        <span class="lead">Sun, Mar 2, 2003</span>
        <div class="post">
          
<P>Rachel and I took a quick trip to Jackpot, NV this weekend.  Watch this space -- stories to come.  It was <a href="http://static.eightypercent.net/stuff/Craptacular.wav">Craptacular</a>!


        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00054.html">Non passive FTP support</a></h2>
        <span class="lead">Sun, Mar 2, 2003</span>
        <div class="post">
          
<P>I coded up non passive FTP support for my FTP code.  It only took me ~30 mins.  I've handed that off to Chris so perhaps it will show up in BlogX at some point.  If not, I may write a standalone utility and release that.
<P>It was pretty easy to send the PORT command and start accepting connections.  I had to mess around a little bit to get it right so I wish that the documentation around using sockets was better.  For instance, there is no short sample that shows creating a socket, binding it to an address and then accepting connections.
<P>BTW, my router (Linksys wireless/4 port) works with both passive and regular FTP connections.  It must be monitoring the control connection and (a) rewriting it with the public FTP address and (b) opening the port through to my machine.  These little boxes are just amazing.


        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00053.html">Rachel to blog?</a></h2>
        <span class="lead">Sat, Mar 1, 2003</span>
        <div class="post">
          
<P>I'm trying to convince my wife that she needs to start a web page to tell funny medical stories.  Stay tuned!


        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00052.html">I-831</a></h2>
        <span class="lead">Fri, Feb 28, 2003</span>
        <div class="post">
          
<blockquote>NOW, THEREFORE, BE IT RESOLVED, That the citizens of the State of Washington do hereby proclaim that Tim Eyman is a Horse's Ass.</blockquote>

<p>Democracy in action.  I saw <a href="http://www.horsesass.org/">this</a> a while ago but just ran across it again from <a href="http://blogs.onenw.org/jon/archives/000216.html">Jon Stahl</a> reached via <a href="http://geourl.org/near/?p=http://www.eightypercent.net">GeoURL</a>.  (I really thought about changing my GeoURL pointer to Boise, but ...  Boise is boring!)


        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00051.html">PASV ftp</a></h2>
        <span class="lead">Thu, Feb 27, 2003</span>
        <div class="post">
          
<P>My FTP code only supports PASV ftp right now.  The reasoning is that I'm behind a NAT firewall and my server isn't.  PASV works much better in that configuration.  <a href="http://www.simplegeek.com/PermaLink.aspx/063d639b-10c7-4826-9f5f-0b6c026a9268">Chris is having problems</a> getting my code to work and he is blaming this.
<P>FTP generally has two TCP connections:  a control connection and a data connection.  The control connection is pretty straigtforward.  You connect to port 21 and start sending messages back and forth.  Some of these commands ask to open a data connection -- to upload a file, download a file or get a directory listing.
<P>There are two ways to establish the data connection:
<ol><li><B>Normal FTP</B>: you can have the server establish the connection to your machine.  You tell the server that you are listening on a certain port and that he should connect to you there.
<li><B>Passive FTP</B>: you establish the connection to the server.  You ask the server for another address/port and you initiate the connection.
</ol>  
<p>In a world with network address translation (NAT) it is a lot easier to connect from your protected machine out to the network than it is to have another machine connect (on a new port) to you.  This is why I did passive FTP.  Doing normal FTP shouldn't be that hard if this is indeed the problem that Chris is having.
<p>Oh yeah, and if both client and server are behind NAT, you are screwed.  That is unless one of the NATs is smart enough to understand FTP and translate stuff along the way.  HTTP can work better here since everyone understands it and it all happens on one socket.  However, HTTP servers aren't set up for this type of thing without wacky extensions like WebDAV or the frontpage extensions.



        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00050.html">D60 obsolete</a></h2>
        <span class="lead">Thu, Feb 27, 2003</span>
        <div class="post">
          
<p>Well, I knew it was coming, but my *ahem* brand new D60 is now superceded by the new <a href="http://www.dpreview.com/news/0302/03022711canoneos10dpreview.asp">Canon 10D</a>.  It has the one thing that I really really want -- a better AF system.  At least I know that mere mortals won't get their hands on them for many months yet.


        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00049.html">New tripod</a></h2>
        <span class="lead">Mon, Feb 24, 2003</span>
        <div class="post">
          
<P>Ordered one of <a href="http://www.bogenphoto.com/product/templates/templates.php3?sectionid=274&itemid=773">these</a> bad boys today.  I can't wait.  I'm also going to order one of <a href="http://acratech.net/prod01.htm">these</a> pretty soon too.
<P>My old tripod had a bent leg and was super heavy.  With this combo I'll be set to carry the tripod on longer hikes.  Things should start warming up soon and I can start exploring the environs around Boise.


        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00048.html">WWCDD?</a></h2>
        <span class="lead">Mon, Feb 24, 2003</span>
        <div class="post">
          
<p><a href="http://michaelw.net">Michael Winser</a> suggested that I should think about taking the same approach that citydesk uses.  They do two things differently than Radio:
<ul>
<li>They use a CRC instead of a byte for byte comparison.  Apparently they use this instead of filetimes altogether.  I could compute the CRC (or do the comparison with the file on disk too, I guess) by wrapping the stream that the transform is writing to and doing the CRC/comparison on the fly
<li>They also post a list of files and CRCs as an xml file on the server. This makes it easier to synchronize files across machines
</ul>

<p>I definitely want to enable the cross machine case, and file times do seem a little fragile to me.  This is something I'll have to think about a little more.
<p>Two way synchronization is really hard though?  What happens if the same file changes on both the client and the server?  How do you handle deleting a file?  (Do you care about deleting a file?)
<p>Another problem comes up when you have multi-party authoring and syncing and that is with respect to item numbers.  Right now I have an item number count that I store in a config file and update every time I create a new entry (it is currently at 49).  <a href="http://simplegeek.com">ChrisAn</a> solves this problem with a good old fashion GUID (I have a bunch cheap if you need them ;)  I might be able to switch over without killing my RSS feed and perma links if I just treat the item ID as a string.


        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-sm-offset-2 col-sm-8">
        <h2><a href="/post/old/00047.html">Before I go to bed</a></h2>
        <span class="lead">Sun, Feb 23, 2003</span>
        <div class="post">
          
<p><a href="http://groups.google.com/groups?hl=en&lr=&ie=ISO-8859-1&safe=off&q=eightypercent&sa=N&tab=wg">Searching</a> google groups for "eightypercent" turns up someone who likes to post in lots of bondage forums.  For the record, that isn't me.  :)


        </div>
      </div>
    </div>
    

    

  <nav>
    <ul class="pager">
      <li class="previous">
        <a href="/post/page/22.html"><span aria-hidden="true">&larr;</span> Newer</a>
      </li>
      <li class="next">
        <a href="/post/page/24.html">Older <span aria-hidden="true">&rarr;</span></a>
      </li>
    </ul>
  </nav>

          <footer>
        <nav class="footer navbar-default clearfix container-fluid">
          <div class="row">
            <div class="pull-left navbar-text">
              <span class="text-nowrap">&copy; 2003-2016 Joe Beda</span>
              <span class="text-nowrap"><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" class="navbar-link">CC by-nc-nd 4.0</a></span>
            </div>
            
          </div>
        </nav>
      </footer>

  </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    
    <script src="/js/bootstrap.min.js"></script>
  </body>
</html>


